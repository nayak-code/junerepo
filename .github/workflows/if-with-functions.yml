name: If condition with functions
on: 
  push:
    branches:
      - master
      - develop
      - feature/**
jobs:
    quality_checks:
      if: startsWith(github.ref_name, 'feature') && github.event_name == 'push'
      runs-on: ubuntu-latest
      steps:
        - name: Run quality checks
          run: echo "Running quality checks on feature branch"
    dev_deploy:
      if: github.ref_name == 'develop' && github.event_name == 'push'
      runs_on: ubuntu-latest
      steps:
        - name: Deploy to development environment
          run: echo "Deploying to development environment"
    prod_deploy:
      if: github.ref_name == 'master' && github.event_name == 'push'
      runs-on: ubuntu-latest
      steps:
        - name: Deploy to production environment
          run: echo "Deploying to production environment" 
    success_message:
      needs: ['quality_checks', 'dev_deploy', 'prod_deploy']
      if: always() && !failure()
      runs-on: ubuntu-latest
      steps:
        - name: Success Message
          run: echo "All relevant jobs completed successfully!"
    failure_message:
      needs: ['quality_checks', 'dev_deploy', 'prod_deploy']
      if: failure()
      runs-on: ubuntu-latest
      steps:
        - name: Failure Message
          run: echo "One or more jobs failed. Please check the logs."
